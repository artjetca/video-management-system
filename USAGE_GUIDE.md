# 🎥 视频管理系统使用指南

## 🚀 新功能概览

您的视频管理系统现在支持以下增强功能：

### ✅ 已实现的功能

1. **Google Drive 视频集成**
   - 自动提取 Google Drive 文件 ID
   - 生成受保护的播放链接
   - 防止直接下载

2. **视频过期控制**
   - 设置视频过期日期
   - 过期后自动禁止播放
   - 过期状态显示

3. **下载保护**
   - 可选择允许/禁止下载
   - 使用 Google Drive 预览模式
   - 防止右键下载

4. **观看统计**
   - 记录观看次数
   - 播放历史跟踪

## 📋 使用步骤

### 1. 登录系统
```
URL: http://localhost:8080
用户名: admin 或 admin@example.com
密码: admin123
```

### 2. 添加 Google Drive 视频

#### 步骤 A: 准备 Google Drive 视频
1. 将视频上传到 Google Drive
2. 右键点击视频文件
3. 选择"获取链接"
4. 设置为"任何知道链接的人都可以查看"
5. 复制链接

#### 步骤 B: 在系统中添加视频
1. 点击"添加视频"
2. 填写视频标题（必需）
3. 添加视频描述（可选）
4. 粘贴 Google Drive 链接（必需）
5. 设置过期日期（可选）
6. 选择是否允许下载（默认禁止）
7. 点击"添加视频"

### 3. 管理视频

#### 查看视频列表
- 显示视频标题、描述
- 显示过期日期和观看次数
- 显示视频状态（活跃/已过期/已归档）
- 显示下载权限状态

#### 播放视频
- 点击"播放"按钮观看视频
- 系统会检查过期状态
- 自动记录观看次数
- 使用受保护的播放器

#### 编辑视频
- 修改标题和描述
- 更新 Google Drive 链接
- 调整过期日期
- 更改下载权限

#### 归档/删除视频
- 归档：隐藏视频但保留数据
- 删除：永久删除视频记录

## 🔒 安全特性

### 防下载保护
1. **Google Drive 预览模式**
   - 使用 `/preview` 而非 `/view`
   - 隐藏下载按钮
   - 限制右键菜单

2. **前端保护**
   - 禁用右键菜单
   - 禁用开发者工具快捷键
   - 禁用文本选择和拖拽
   - 监控下载尝试

3. **后端验证**
   - 登录验证
   - 过期检查
   - 权限控制

### 过期控制
- 精确到分钟的过期时间
- 自动状态更新
- 过期后禁止播放
- 视觉状态指示

## 📊 支持的 Google Drive 链接格式

系统支持以下 Google Drive 链接格式：

```
# 标准分享链接
https://drive.google.com/file/d/FILE_ID/view?usp=sharing

# 旧版分享链接
https://drive.google.com/open?id=FILE_ID

# 直接文件链接
https://drive.google.com/file/d/FILE_ID/view
```

## ⚠️ 重要注意事项

### Google Drive 设置
1. **权限设置**：必须设置为"任何知道链接的人都可以查看"
2. **文件格式**：建议使用 MP4 格式以获得最佳兼容性
3. **文件大小**：Google Drive 对大文件有播放限制

### 安全限制
1. **下载保护**：无法完全阻止技术用户下载，但可以阻止普通用户
2. **过期控制**：基于服务器时间，确保服务器时间准确
3. **访问控制**：需要登录才能观看视频

### 性能考虑
1. **加载速度**：取决于 Google Drive 的响应速度
2. **并发观看**：Google Drive 有并发限制
3. **带宽使用**：视频流量通过 Google Drive

## 🛠️ 故障排除

### 常见问题

1. **视频无法播放**
   - 检查 Google Drive 链接是否有效
   - 确认权限设置正确
   - 验证视频是否已过期

2. **链接格式错误**
   - 确保使用正确的 Google Drive 分享链接
   - 检查链接中是否包含文件 ID

3. **过期时间设置**
   - 确保过期时间大于当前时间
   - 使用正确的日期时间格式

### 技术支持
- 检查浏览器控制台错误
- 验证网络连接
- 确认 Google Drive 服务状态

## 📈 最佳实践

1. **视频管理**
   - 定期检查过期视频
   - 及时更新视频信息
   - 合理设置过期时间

2. **安全考虑**
   - 不要分享管理员账户
   - 定期更改密码
   - 监控视频访问情况

3. **用户体验**
   - 提供清晰的视频标题
   - 添加详细的视频描述
   - 合理设置观看权限

---

🎉 **恭喜！您的视频管理系统现在具备了完整的 Google Drive 集成、过期控制和下载保护功能！**
